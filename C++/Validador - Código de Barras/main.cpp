#include <iostream>
#include <locale.h>
using namespace std;
int main()
{
    setlocale (LC_ALL, "Portuguese");

    long long int cdg, d12, d11, d10, d9, d8, d7, d6, d5, d4, d3, d2, d1, d0, s11, s9, s7, s5, s3, s1, soma3, soma5, dvs4, mtp6, digito;

    cout << "Informe o código de barras: ";
    cin >> cdg;

    d12 = cdg / 1000000000000;
    d11 = (cdg / 100000000000) % 10;
    d10 = ((cdg / 10000000000) % 100) % 10 ;
    d9 = ((((cdg / 1000000000) % 1000)% 100)% 10);
    d8 = (((((cdg / 100000000) % 10000) % 1000)% 100)% 10);
    d7 = ((((((cdg / 10000000) % 100000) % 10000) % 1000)% 100)% 10);
    d6 = (((((((cdg / 1000000) % 1000000) % 100000) % 10000) % 1000)% 100)% 10);
    d5 = ((((((((cdg / 100000) % 10000000) % 1000000) % 100000) % 10000) % 1000)% 100)% 10);
    d4 = (((((((((cdg / 10000) % 100000000) % 10000000) % 1000000) % 100000) % 10000) % 1000)% 100)% 10);
    d3 = ((((((((((cdg / 1000) % 1000000000) % 100000000) % 10000000) % 1000000) % 100000) % 10000) % 1000)% 100)% 10);
    d2 = (((((((((((cdg / 100) % 10000000000) % 1000000000) % 100000000) % 10000000) % 1000000) % 100000) % 10000) % 1000)% 100)% 10);
    d1 = ((((((((((((cdg / 10) % 100000000000) % 10000000000) % 1000000000) % 100000000) % 10000000) % 1000000) % 100000) % 10000) % 1000)% 100)% 10);
    d0 = ((((((((((((cdg % 1000000000000) % 100000000000) % 10000000000) % 1000000000) % 100000000) % 10000000) % 1000000) % 100000) % 10000) % 1000)% 100)% 10);

    s11 = d11 * 3;
    s9 = d9 * 3;
    s7 = d7 * 3;
    s5 = d5 * 3;
    s3 = d3 * 3;
    s1 = d1 * 3;

    soma3 = s11 + s9 + s7 + s5 + s3 + s1 + d12 + d10 + d8 + d6 + d4 + d2;

    dvs4 = soma3 / 10;

    soma5 = dvs4 + 1;

    mtp6 = soma5 * 10;

    digito = mtp6 - soma3;

    if (cdg > 9999999999999 or cdg < 1000000000000 ) {

        cout << "\nO código é inválido" << endl;
    }

    else if (d0 != digito) {

        cout << "\nO código está incorreto" << endl;
    } else {

        cout << "\nO código está correto" << endl << "\nDigito de confirmação: "<< digito << endl;
    }

    return 0;
}
