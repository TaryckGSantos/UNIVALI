#include <iostream>
#include <stdlib.h>
#include <time.h>
#include <stdio.h>
#include <fstream>
using namespace std;

struct Produto{
    int codigo;
    string nome;
    float preco;
    Produto *proximo;
};

bool inicializa_lista(Produto* inicio){
    if (inicio == NULL) {
        return true;
    }
    else {
        return false;
    }
}

void inserir_primeiro(Produto* &inicio, Produto* &ultimo, Produto auxiliar){

    Produto* temp = new Produto;
    temp->codigo = auxiliar.codigo;
    temp->nome = auxiliar.nome;
    temp->preco = auxiliar.preco;
    temp->proximo = NULL;
    inicio = temp;
    ultimo = temp;
}

void inserir(Produto* &inicio, Produto* &ultimo, Produto auxiliar){

    if (inicializa_lista(inicio)) {
        inserir_primeiro(inicio, ultimo, auxiliar);
    }
    else {
        Produto* temp = new Produto;
        temp->codigo = auxiliar.codigo;
        temp->nome = auxiliar.nome;
        temp->preco = auxiliar.preco;
        temp->proximo = NULL;
        ultimo->proximo = temp;
        ultimo = temp;
    }
}
int buscar_produto(Produto* prod_buscar, int &busca_aux){

    if(prod_buscar->codigo == busca_aux){
            cout << endl << endl << endl;
            cout << "\t\t" << "Nome do produto: " << prod_buscar->nome;
            cout << endl << endl << "\t\tCódigo do produto: " << prod_buscar->codigo;
            cout << endl << endl << "\t\tPreço do produto: " << prod_buscar->preco << " R$";
            cout << endl << endl;
            system("pause>nul");
    }else{
        return (buscar_produto(prod_buscar->proximo, busca_aux));
    }
}

int mostra_produtos(Produto* prod_mostrar){

    if (prod_mostrar == NULL) {
        return 1;
    }

    else if (prod_mostrar != NULL) {
        cout << "\t\t" << "Nome do produto: " << prod_mostrar->nome;
        cout << endl << endl << "\t\tCódigo do produto: " << prod_mostrar->codigo;
        cout << endl << endl << "\t\tPreço do produto: " << prod_mostrar->preco << " R$";
        cout << endl << endl << "\t\t" << "----------------------" << endl << endl;
    }
    return mostra_produtos(prod_mostrar->proximo);
}

int remover_produto(Produto* prod_remover){

    system("cls");

    int select;

    cout << endl << endl << endl << endl;
    cout << "\t\t" << " - LISTA DE PRODUTOS - ";
    cout << endl << endl << endl;
    cout << "\t\t" << "- Insira o código do produto que será removido: ";
    cin >> select;

    if (inicializa_lista(prod_remover)) {
        cout << "\t\t" << "A lista está vazia!";
    } else {
        while (prod_remover != NULL) {
            if(select==prod_remover->codigo){
                delete prod_remover;
            } else {
                prod_remover = prod_remover->proximo;
            }
        }
    }
}

int menu(){

    int confirma_menu;
    cout << endl << endl << endl << endl;
    cout << "\t\t" << " - LISTA DE FUNCIONALIDADES - ";
    cout << endl << endl << endl;
    cout << "\t\t" << "Para inserir um produto, pressione 1: ";
    cout << endl << endl;
    cout << "\t\t" << "Para remover um dos produtos, pressione 2: ";
    cout << endl << endl;
    cout << "\t\t" << "Para buscar um produto dentro da lista, pressione 3: ";
    cout << endl << endl;
    cout << "\t\t" << "Para encerrar a lista, pressione 4: ";
    cout << endl << endl << "\t\t";
    cin >> confirma_menu;

    return confirma_menu;
}

int main()
{
    setlocale(LC_ALL, "Portuguese");

    Produto* inicio = NULL;
    Produto* ultimo = NULL;
    Produto auxiliar;

    int confirma_menu, confirma_inicio;

    cout << endl << endl << endl << endl;
    cout << "\t\t" << "LISTA DE PRODUTOS - MENU INICIAL";
    cout << endl << endl << endl;
    cout << "\t\t" << "Para iniciar a agenda, pressione 1: ";
    cout << endl << endl;
    cout << "\t\t" << "Para sair da lista sem adicionar nenhum produto, pressione 2: ";
    cout << endl << endl << "\t\t";
    cin >> confirma_inicio;

    if(confirma_inicio == 1){
        system("cls");

    } else if(confirma_inicio == 2){
        system("cls");
        cout << endl << endl << endl << endl;
        cout << "\t\t" << "Agenda encerrada :)";
        cout << endl << endl << endl;
        exit(0);
    }
    else {
        cout << endl << endl << "Pressione apenas 1 ou 2!";
        cin >> confirma_inicio;
    }

    do{

        cout << endl << endl << endl << endl;
        cout << "\t\t" << " - LISTA DE PRODUTOS - ";
        cout << endl << endl << endl;
        mostra_produtos(inicio);
        confirma_menu = menu();

        switch(confirma_menu){

            case 1: //inserção
                system("cls");
                cout << endl << endl << endl << endl;
                cout << "\t\t" << " - LISTA DE PRODUTOS - ";
                cout << endl << endl << endl;
                cout << "\t\t" << "- Insira o nome do produto: ";
                cin >> auxiliar.nome;
                cout << endl << endl << "\t\t" << "- Insira o código do produto: ";
                cin >> auxiliar.codigo;
                cout << endl << endl << "\t\t" << "- Insira o preço do produto: ";
                cin >> auxiliar.preco;
                inserir(inicio, ultimo, auxiliar);
                system("cls");
                break;

            case 2://remover
                remover_produto(inicio);
                system("cls");
                break;

            case 3:
                int busca_aux;

                system("cls");
                cout << endl << endl << endl << endl;
                cout << "\t\t" << " - LISTA DE PRODUTOS - ";
                cout << endl << endl << endl;
                cout << "\t\t" << "Digite o código do produto: ";
                cin >> busca_aux;
                buscar_produto(inicio,busca_aux);
                system("cls");
                break;

            default:
                cout << endl << endl << endl << endl;
                cout << "\t\tOpção inválida!";
                cout << endl << endl << endl;
                break;
        }
    } while(confirma_menu != '5');

    /*atual = inicio;
    while (atual != NULL)
    {
        inicio = atual->proximo;
        delete(atual);
        atual = inicio;
    }

    do{
        menu(confirma_menu);
    } while (confirma_menu != 4);*/

    return 0;
}
