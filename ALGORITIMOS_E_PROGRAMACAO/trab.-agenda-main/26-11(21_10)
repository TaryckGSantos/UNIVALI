#include <iostream>
#include <stdlib.h>
#include <time.h>
#include <stdio.h>
#include <fstream>
using namespace std;

struct Produto{
    int codigo;
    string nome;
    float preco;
    Produto *proximo;
};

/*struct ListaE{
    Produto * inicio;
};*/

bool inicializa_lista(Produto* inicio){
    if (inicio == NULL) {
        return true;
    }
    else {
        return false;
    }
}

void inserir_primeiro(Produto* &inicio, Produto* &ultimo, Produto auxiliar){

    Produto* temp = new Produto;
    temp->codigo = auxiliar.codigo;
    temp->nome = auxiliar.nome;
    temp->preco = auxiliar.preco;
    temp->proximo = NULL;
    inicio = temp;
    ultimo = temp;
}

void inserir(Produto* &inicio, Produto* &ultimo, Produto auxiliar){

    if (inicializa_lista(inicio)) {
        inserir_primeiro(inicio, ultimo, auxiliar);
    }
    else {
        Produto* temp = new Produto;
        temp->codigo = auxiliar.codigo;
        temp->nome = auxiliar.nome;
        temp->preco = auxiliar.preco;
        temp->proximo = NULL;
        ultimo->proximo = temp;
        ultimo = temp;
    }
}

void mostra_produtos(Produto* prod_mostrar){

    cout << endl << endl << endl << endl;
    cout << "\t\t" << " - LISTA DE PRODUTOS - ";
    cout << endl << endl << endl;
    if (inicializa_lista(prod_mostrar)) {
        cout << "\t\t" << "A lista está vazia!";
    } else {
        while (prod_mostrar != NULL) {
            cout << "\t\t" << "Nome do produto: " << prod_mostrar->nome;
            cout << endl << endl << "\t\tCódigo do produto: " << prod_mostrar->codigo;
            cout << endl << endl << "\t\tPreço do produto: " << prod_mostrar->preco;
            cout << endl << endl << "\t\t" << "----------------------" << endl << endl;
            prod_mostrar = prod_mostrar->proximo;
        }
    }
}

int remover_produto(Produto* &inicio, Produto* &ultimo){

    if (inicializa_lista(inicio)) {
        cout << endl << endl << endl << endl;
        cout << "\t\t" << "A lista esta vazia!";
        cout << endl << endl << endl;
    } else if(inicio==ultimo) {
        delete inicio;
        inicio == NULL;
        ultimo == NULL;

    }
    else {
        Produto* temp = inicio;
        inicio = inicio->proximo;
        delete temp;
    }
}

int menu(){

    int confirma_menu;
    cout << endl << endl << endl << endl;
    cout << "\t\t" << " - LISTA DE PRODUTOS - ";
    cout << endl << endl << endl;
    cout << "\t\t" << "Para inserir um produto, pressione 1: ";
    cout << endl << endl;
    cout << "\t\t" << "Para mostrar os produtos, pressione 2: ";
    cout << endl << endl;
    cout << "\t\t" << "Para remover um dos produtos, pressione 3: ";
    cout << endl << endl;
    cout << "\t\t" << "Para encerrar a lista, pressione 4: ";
    cout << endl << endl << "\t\t";
    cin >> confirma_menu;

    return confirma_menu;
}

int main()
{
    setlocale(LC_ALL, "Portuguese");

    Produto* inicio = NULL;
    Produto* ultimo = NULL;
    Produto auxiliar;

    int confirma_menu, confirma_inicio;

    cout << endl << endl << endl << endl;
    cout << "\t\t" << "LISTA DE PRODUTOS - MENU INICIAL";
    cout << endl << endl << endl;
    cout << "\t\t" << "Para iniciar a agenda, pressione 1: ";
    cout << endl << endl;
    cout << "\t\t" << "Para sair da lista sem adicionar nenhum produto, pressione 2: ";
    cout << endl << endl << "\t\t";
    cin >> confirma_inicio;

    if(confirma_inicio == 1){
        system("cls");

    } else if(confirma_inicio == 2){
        system("cls");
        cout << endl << endl << endl << endl;
        cout << "\t\t" << "Agenda encerrada :)";
        cout << endl << endl << endl;
        exit(0);
    }
    else {
        cout << endl << endl << "Pressione apenas 1 ou 2!";
        cin >> confirma_inicio;
    }

    do{

        mostra_produtos(inicio);
        confirma_menu = menu();

        switch(confirma_menu){

            case 1: //inserção
                system("cls");
                cout << endl << endl << endl << endl;
                cout << "\t\t" << " - LISTA DE PRODUTOS - ";
                cout << endl << endl << endl;
                cout << "\t\t" << "- Insira o nome do produto: ";
                cin >> auxiliar.nome;
                cout << endl << endl << "\t\t" << "- Insira o código do produto: ";
                cin >> auxiliar.codigo;
                cout << endl << endl << "\t\t" << "- Insira o preço do produto: ";
                cin >> auxiliar.preco;
                inserir(inicio, ultimo, auxiliar);
                system("cls");
                break;

            case 2://eliminação
                mostra_produtos(inicio);
                break;

            case 3://mostrar
                remover_produto(inicio,ultimo);
                system("pause");
                break;

            default:
                cout << endl << endl << endl << endl;
                cout << "\t\tOpção inválida!";
                cout << endl << endl << endl;
                break;
        }
    } while(confirma_menu != '5');

    /*atual = inicio;
    while (atual != NULL)
    {
        inicio = atual->proximo;
        delete(atual);
        atual = inicio;
    }

    do{
        menu(confirma_menu);
    } while (confirma_menu != 4);*/

    return 0;
}
